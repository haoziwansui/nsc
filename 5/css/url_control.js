function UrlControl(){var a=this;this.urlProtocol="";this.urlHostname="";this.urlPort="";this.urlPath="";this.urlAnchor="";this.urlParams={};this.paramsFormat={};this.paramKeyData="_data";this.setUrl=function(b){this._parseUrl(b)};this.setParamsFormat=function(b){if("object"!==typeof b){return false}this.paramsFormat=b;return true};this._parseUrl=function(q){q=q+"";var j,n,l,r,u,b,f,p;var g=/^([^?#]*)\??([^#]*)(#?.*)$/;var k=q.match(g);j="undefined"===typeof k[1]?"":k[1];f="undefined"===typeof k[2]?"":k[2];b="undefined"===typeof k[3]?"":k[3];var t=/^((\w+):\/\/(([\w.-]+)|(\[.+\]))(:(\d+))?)?(.*)$/;var d=j.match(t);n="undefined"===typeof d[2]?"":d[2];l="undefined"===typeof d[3]?"":d[3];r="undefined"===typeof d[7]?"":d[7];u="undefined"===typeof d[8]?"":d[8];p={};if(""!==f){var c=f.split("&");for(var s=0;s<c.length;s++){var e=c[s];if(""===e){continue}var o,h;var m=e.indexOf("=");if(-1===m){o=e;h=""}else{o=e.substr(0,m);h=e.substr(m+1)}if(""===o){continue}p[o]=h}}this.urlProtocol=n;this.urlHostname=l;this.urlPort=r;this.urlPath=u;this.urlAnchor=b;this.urlParams=p};this.getPath=function(){return this.urlPath};this.getAnchor=function(){return this.urlAnchor};this.modAnchor=function(b){this.urlAnchor=b};this.addParam=function(b,c){b=b+"";c=c+"";if("undefined"!==typeof this.urlParams[b]){return false}this.urlParams[b]=c;return true};this.replaceParam=function(b,c){b=b+"";c=c+"";if("undefined"===typeof this.urlParams[b]){return false}this.urlParams[b]=c;return true};this.addReplaceParam=function(b,c){this.urlParams[b]=c;return true};this.getParam=function(b){if("undefined"===typeof this.urlParams[b]){return false}return this.urlParams[b]};this.delParam=function(b){if("undefined"===typeof this.urlParams[b]){return false}delete this.urlParams[b];return true};this.addParamData=function(b){return this.addParam(this.paramKeyData,b)};this.replaceParamData=function(b){return this.replaceParam(this.paramKeyData,b)};this.addReplaceParamData=function(b){return this.addReplaceParam(this.paramKeyData,b)};this.getParamData=function(){return this.getParam(this.paramKeyData)};this.delParamData=function(){return this.delParam(this.paramKeyData)};this.getUrl=function(){var b=this.urlProtocol;var d=this.urlHostname;var g=this.urlPort;var c=this.urlPath;var f=this.getQs();var e=this.urlAnchor;if(""===this.urlProtocol){g=""}else{b+="://";g=""===g?"":(":"+g)}f=""===f?"":"?"+f;return b+d+g+c+f+e};this.getFormatUrl=function(){var b=this.urlProtocol;var d=this.urlHostname;var g=this.urlPort;var c=this.urlPath;var f=this.getFormatQs();var e=this.urlAnchor;if(""===this.urlProtocol){g=""}else{b+="://";g=":"+g}f=""===f?"":"?"+f;return b+d+g+c+f+e};this.getQs=function(g){var d;switch(typeof g){case"undefined":g=[];break;case"object":break;default:g=[g+""];break}var c=g.length;var c="undefined"===typeof c?0:c;var f={};for(d in this.urlParams){f[d]=this.urlParams[d]}if(0<c){for(var b=0;b<c;b++){delete f[g[b]]}}var e=[];var b=0;for(d in f){e[b]=d+"="+f[d];b++}return e.join("&")};this.getFormatQs=function(j){var f;switch(typeof j){case"undefined":j=[];break;case"object":break;default:j=[j+""];break}var e=j.length;var e="undefined"===typeof e?0:e;var h={};for(f in this.urlParams){h[f]=this.urlParams[f]}if(0<e){for(var d=0;d<e;d++){delete h[j[d]]}}var d=0;var g=[];var c=this.paramsFormat.must;if("object"===typeof c){for(f in c){if("undefined"!==typeof h[f]){g[d]=f+"="+h[f];delete h[f]}else{g[d]=f+"="+c[f]}d++}}var b=this.paramsFormat.may;if("object"===typeof b){for(f in b){if("undefined"!==typeof h[f]){g[d]=f+"="+h[f];delete h[f];d++}}}for(f in h){g[d]=f+"="+h[f];d++}return g.join("&")}}function UrlImplode(){var a=this;this.urlsData={};this.getUrlsData=function(){return this.urlsData};this.setImplode=function(k){k=decodeURIComponent(k);var h={};var d=0;if(""===k){return true}var f=k.split("&");for(d=0;d<f.length;d++){var j=f[d];if(""===j){continue}var g,e;var c=j.indexOf("=");if(-1===c){g=j;e=""}else{g=j.substr(0,c);e=j.substr(c+1)}if(""===g){continue}var b=new UrlControl();b.setUrl(decodeURIComponent(e));h[g]=b}this.urlsData=h;return true};this.addUrlControl=function(b,c){if("undefined"!==typeof this.urlsData[b]){return false}if("object"!==typeof c){return false}this.urlsData[b]=c;return true};this.delUrlControl=function(b){if("undefined"===typeof this.urlsData[b]){return false}delete this.urlsData[b];return true};this.getUrlControl=function(b){if("undefined"===typeof this.urlsData[b]){return false}return this.urlsData[b]};this.getImplode=function(){var c;var b=0;var d=[];for(c in this.urlsData){d[b]=c+"="+encodeURIComponent(this.urlsData[c].getUrl());b++}return encodeURIComponent(d.join("&"))}};